{
    "$schema": "http://json-schemas.org/draft-04/schemas",
    "title": "invoiceBase",
    "description": "Base properties for an Invoice",
    "definitions": {
        "id": {
            "description": "Unique identifier for the Invoice",
            "$ref": "payTypes#/definitions/UUID"
        },
        "accountId": {
            "description": "Unique identifier for the transacting Invoice entity",
            "$ref": "payTypes#/definitions/UUID"
        },
        "orderId": {
            "description": "Unique identifier for the top-level Invoice entity",
            "$ref": "payTypes#/definitions/UUID"
        },
        "reference": {
            "description": "Invoice Reference",
            "type": "string",
            "maxLength": 50
        },
        "state": {
            "description": "Current condition of the Invoice",
            "enum": [ "OPEN", "PAID", "PENDING", "OVERPAID", "UNDERPAID", "CANCELED", "UNPAID" ],
            "default": "OPEN"
        },
        "quote": {
            "description": "The digital currency Quote",
            "type": "object",
            "properties": {
                "quoteId": {
                    "description": "Unique identifier for the Quote",
                    "$ref": "payTypes#/definitions/UUID"
                },
                "amount": {
                    "description": "Amount of the Quote",
                    "$ref": "payTypes#/definitions/cryptoCurrencyFormat"
                },
                "currency": {
                    "description": "Currency of the Quote",
                    "$ref": "payTypes#/definitions/digitalCurrency"
                },
                "exchangeRate": {
                    "description": "Exchange rate used to calculate the crypto-currency amount",
                    "$ref": "payTypes#/definitions/cryptoCurrencyFormat"
                },
                "expiresAt": {
                    "description": "Time that the Quote expires at (UTC)",
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{1,2}-\\d{1,2}T{1}\\d{2}:{1}\\d{2}:{1}\\d{2}.{1}\\d{1,3}Z{1}$"
                }
            },
            "additionalProperties": true,
            "required": [ "amount", "currency" ]
        },
        "amountReceived": {
            "description": "Amount received against the Invoice",
            "$ref": "payTypes#/definitions/cryptoCurrencyFormat",
            "default": "0.0"
        },
        "paymentAddress": {
            "description": "One-time coin address to receive consumers payment (generated by Bitnet)",
            "type": "string",
            "pattern": "^[13nm][a-km-zA-HJ-NP-Z1-9]{26,33}$"
        },
        "paymentUri": {
            "description": "Payment URI generated by Bitnet to allow the consumer to initiate the transaction. The format for Bitcoin transactions is in accordance with Bitcoin URI Scheme (https://github.com/bitcoin/bips/blob/master/bip-0021.mediawiki)",
            "$ref": "payTypes#/definitions/uri"
        },
        "refundIds": {
            "description" : "A collection of Refund identifiers",
            "type": [ "array", "null" ],
            "items": {
                "type": "string"
            },
            "uniqueItems": true
        },
        "requiredVerification": {
            "description": "Merchant-defined confidence level required for any transaction to fulfil the Invoice amount",
            "type": "integer"
        },
        "confirmations": {
            "description": "The minimum confirmation level across all Payments made against the Invoice",
            "type": "string",
            "default": "0",
            "pattern": "^(0|[1-9]{1}[0-9]{0,5})$"
        },
        "createdAt": {
            "description": "Creation timestamp of the Invoice (UTC)",
            "$ref": "payTypes#/definitions/date"
        },
        "modifiedAt": {
            "description": "Last modification timestamp of the Invoice (UTC)",
            "$ref": "payTypes#/definitions/dateNull"
        },
        "expiresAt": {
            "description": "Time the Invoice will expire at (UTC)",
            "$ref": "payTypes#/definitions/date"
        }
    }
}